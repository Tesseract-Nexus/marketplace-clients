# =============================================================================
# Admin Panel Environment Configuration
# Copy this file to .env.local for local development
# =============================================================================

# Server Configuration
NODE_ENV=development
PORT=3001
HOSTNAME=0.0.0.0
NEXT_TELEMETRY_DISABLED=1

# =============================================================================
# Security Configuration
# =============================================================================

# CSRF Protection Secret (REQUIRED in production)
# Generate with: openssl rand -base64 32
# Used for HMAC signing of CSRF tokens
# In development, a default fallback is used if not set
CSRF_SECRET=

# =============================================================================
# Backend Service URLs (Server-Side Only)
# These are used by Next.js API routes to proxy requests to backend services
# IMPORTANT: These should NEVER be exposed to the client (no NEXT_PUBLIC_ prefix)
# =============================================================================

# Core E-commerce Services
CATEGORIES_SERVICE_URL=http://localhost:8080/api/v1
PRODUCTS_SERVICE_URL=http://localhost:8080/api/v1
ORDERS_SERVICE_URL=http://localhost:8080/api/v1
VENDORS_SERVICE_URL=http://localhost:8080/api/v1
STAFF_SERVICE_URL=http://localhost:8080/api/v1
CUSTOMERS_SERVICE_URL=http://localhost:8080/api/v1
REVIEWS_SERVICE_URL=http://localhost:8080/api/v1
COUPONS_SERVICE_URL=http://localhost:8080/api/v1
TICKETS_SERVICE_URL=http://localhost:8080/api/v1

# Settings Service
SETTINGS_SERVICE_URL=http://localhost:8085

# Shipping Service
SHIPPING_SERVICE_URL=http://localhost:8088
NEXT_PUBLIC_SHIPPING_SERVICE_URL=http://localhost:8088

# Translation Service (for language translations, preferences, and auto-translation)
TRANSLATION_SERVICE_URL=http://localhost:8089

# Location Service
LOCATION_SERVICE_URL=http://localhost:8080

# Auth Service
AUTH_SERVICE_URL=http://localhost:8080

# Tenant Service
TENANT_SERVICE_URL=http://localhost:8082

# Document Service
DOCUMENT_SERVICE_URL=http://localhost:8082
DOCUMENT_SERVICE_BUCKET=tesseracthub-devtest-assets

# =============================================================================
# Subdomain Configuration
# =============================================================================

# Admin domain for subdomain routing
# Local: admin.localhost:3001 (requires /etc/hosts entries)
# Dev:   admin.dev.tesserix.app
# Prod:  admin.tesserix.app
NEXT_PUBLIC_ADMIN_DOMAIN=admin.localhost:3001

# Storefront domain
NEXT_PUBLIC_STOREFRONT_DOMAIN=localhost:3200

# Storefront URL for live preview
NEXT_PUBLIC_STOREFRONT_URL=http://localhost:3200

# Onboarding app URL (for "Create New Business")
NEXT_PUBLIC_ONBOARDING_URL=http://localhost:3000

# =============================================================================
# Local Development with Subdomains
# =============================================================================
#
# Add these to /etc/hosts for local subdomain testing:
#
#   127.0.0.1 admin.localhost
#   127.0.0.1 my-bakery.admin.localhost
#   127.0.0.1 clothing-co.admin.localhost
#   127.0.0.1 tesseracthub.admin.localhost
#
# Then access: http://my-bakery.admin.localhost:3001
#
# Alternatively, use simplified pattern (works without /etc/hosts on some systems):
#   http://my-bakery.localhost:3001
#
# =============================================================================

# =============================================================================
# Development Auth Configuration
# =============================================================================
DEV_TENANT_ID=main-store
DEV_USER_ID=admin-user

# Enable mock tenant data when tenant service is unavailable
ENABLE_MOCK_TENANTS=true

# =============================================================================
# DEV AUTH BYPASS (Local Development Only)
# =============================================================================
# Set to "true" to bypass authentication for local development
# This allows running the admin portal without the auth service
# Login page at /login remains accessible for testing
# WARNING: Never enable this in production!
NEXT_PUBLIC_DEV_AUTH_BYPASS=false

# =============================================================================
# Feature Flags (GrowthBook)
# =============================================================================
# GrowthBook SDK Client Key (for feature flag evaluation)
# Get this from GrowthBook Dashboard > SDK Configuration > SDK Connections
NEXT_PUBLIC_GROWTHBOOK_CLIENT_KEY=sdk-tesserix

# GrowthBook API Host (for admin operations)
# Self-hosted: http://growthbook.growthbook.svc.cluster.local:3100
# GrowthBook Cloud: https://api.growthbook.io
GROWTHBOOK_API_HOST=http://growthbook.growthbook.svc.cluster.local:3100

# GrowthBook Secret API Key (for REST API authentication - toggling features)
# Create this in GrowthBook: Settings > API Keys > New Secret Key
# The key should have admin permissions to toggle features
# IMPORTANT: Keep this secret, never expose to clients
GROWTHBOOK_SECRET_KEY=secret_your_key_here

# Default GrowthBook Organization ID (used when tenant has no dedicated org)
# Find this in GrowthBook: Settings > General > Organization ID
GROWTHBOOK_DEFAULT_ORG_ID=

# Feature Flags Service URL (internal SDK proxy)
# Note: Use service port 8080, not container port 8096
FEATURE_FLAGS_SERVICE_URL=http://feature-flags-service.devtest.svc.cluster.local:8080

# =============================================================================
# Production/Dev Cloud URLs (for reference)
# =============================================================================
#
# Dev Cloud Environment:
#   NEXT_PUBLIC_ADMIN_DOMAIN=admin.dev.tesserix.app
#   NEXT_PUBLIC_STOREFRONT_DOMAIN=dev.tesserix.app
#   API_GATEWAY_URL=https://api.dev.tesserix.app
#
# Production Environment:
#   NEXT_PUBLIC_ADMIN_DOMAIN=admin.tesserix.app
#   NEXT_PUBLIC_STOREFRONT_DOMAIN=tesserix.app
#   API_GATEWAY_URL=https://api.tesserix.app
#
# URL Patterns:
#   Admin:      {tenant}-admin.tesserix.app (prod)
#               {tenant}.admin.dev.tesserix.app (dev)
#   Storefront: {tenant}.tesserix.app (prod)
#               {tenant}.dev.tesserix.app (dev)
#

# =============================================================================
# SIDEBAR VISIBILITY CONFIGURATION
# =============================================================================
# Control which sidebar menu items are visible in the admin panel
# Set to "true" to show, "false" to hide
# These are client-side environment variables (NEXT_PUBLIC_ prefix)
#
# Default: all items visible except Ad Manager, Feature Flags, Marketing, Integrations
# To enable hidden features in development, set the corresponding var to "true"

NEXT_PUBLIC_SIDEBAR_DASHBOARD=true
NEXT_PUBLIC_SIDEBAR_ANALYTICS=true
NEXT_PUBLIC_SIDEBAR_CATALOG=true
NEXT_PUBLIC_SIDEBAR_ORDERS=true
NEXT_PUBLIC_SIDEBAR_CUSTOMERS=true
NEXT_PUBLIC_SIDEBAR_MARKETING=true        # Marketing menu enabled
NEXT_PUBLIC_SIDEBAR_AD_MANAGER=false      # Set to "true" to show Ad Manager (in development)
NEXT_PUBLIC_SIDEBAR_VENDORS=true
NEXT_PUBLIC_SIDEBAR_TEAM=true
NEXT_PUBLIC_SIDEBAR_STOREFRONTS=true
NEXT_PUBLIC_SIDEBAR_FEATURE_FLAGS=false   # Set to "true" to show Feature Flags (in development)
NEXT_PUBLIC_SIDEBAR_INTEGRATIONS=false    # Set to "true" to show Integrations (not prod ready, enable in v2)
NEXT_PUBLIC_SIDEBAR_SETTINGS=true
NEXT_PUBLIC_SIDEBAR_SETTINGS_MARKETING=false  # Set to "true" to show Settings > Marketing (not prod ready, enable in v2)

# =============================================================================
# OpenPanel Analytics
# =============================================================================
# Client ID from OpenPanel dashboard (per-app)
NEXT_PUBLIC_OPENPANEL_CLIENT_ID=
# OpenPanel server URL (server-side only, used for rewrites proxy)
OPENPANEL_URL=dev-analytics.tesserix.app
