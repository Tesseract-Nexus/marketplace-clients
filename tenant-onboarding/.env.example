# Tenant Onboarding App - Environment Variables
# Copy this file to .env.local for local development

# ==================================
# Backend Service URLs (Server-Side)
# ==================================
# These are used by Next.js API routes to proxy requests to backend services
# IMPORTANT: These should NEVER be exposed to the client (no NEXT_PUBLIC_ prefix)

# Tenant Service - Handles onboarding sessions, business info, verification
TENANT_SERVICE_URL=http://localhost:8086

# Location Service - Handles countries, states, currencies, timezones
LOCATION_SERVICE_URL=http://localhost:8087

# ==================================
# Post-Onboarding Redirect
# ==================================
# Ecommerce Admin URL - Users are redirected here after completing onboarding
# This can be different based on environment (dev/staging/prod)
NEXT_PUBLIC_ECOMMERCE_ADMIN_URL=http://localhost:3001

# ==================================
# Application Configuration
# ==================================
NODE_ENV=development

# ==================================
# OpenPanel Analytics
# ==================================
# Client ID from OpenPanel dashboard (per-app)
NEXT_PUBLIC_OPENPANEL_CLIENT_ID=
# OpenPanel server URL (server-side only, used for rewrites proxy)
OPENPANEL_URL=dev-analytics.tesserix.app

# ==================================
# Analytics (PostHog)
# ==================================
# PostHog Analytics - Optional, for tracking onboarding funnel and user behavior
# Get your API key from PostHog Cloud (https://app.posthog.com) or self-hosted instance
# NEXT_PUBLIC_POSTHOG_KEY=phc_your_project_api_key_here
# NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# For self-hosted PostHog:
# NEXT_PUBLIC_POSTHOG_KEY=phc_your_project_api_key_here
# NEXT_PUBLIC_POSTHOG_HOST=https://posthog.your-domain.com

# ==================================
# Feature Flags (Optional)
# ==================================
# NEXT_PUBLIC_ENABLE_ANALYTICS=false
# NEXT_PUBLIC_ENABLE_DEBUG=true

# ==================================
# Content Database (postgresql-global)
# ==================================
# Database for static content: FAQs, testimonials, features, pricing, etc.
CONTENT_DB_HOST=localhost
CONTENT_DB_PORT=5432
CONTENT_DB_USER=postgres
CONTENT_DB_PASSWORD=your_password_here
CONTENT_DB_NAME=onboarding_content_db
CONTENT_DB_SSLMODE=prefer

# ==================================
# Content Admin (Internal Only)
# ==================================
# API key for accessing the internal content admin page at /internal/content
# Generate a secure random key: openssl rand -hex 32
# Access via port-forward: kubectl port-forward svc/tenant-onboarding 4201:80 -n marketplace
# Then visit: http://localhost:4201/internal/content?key=YOUR_KEY
#
# In Kubernetes, the key is fetched from GCP Secret Manager using CONTENT_ADMIN_API_KEY_SECRET_NAME
# For local development, use the direct CONTENT_ADMIN_API_KEY env var instead
CONTENT_ADMIN_API_KEY=change_me_to_a_secure_random_key
# CONTENT_ADMIN_API_KEY_SECRET_NAME=devtest-marketplace-content-admin-key

# ==================================
# GCP Secret Manager (Production)
# ==================================
# When USE_GCP_SECRET_MANAGER=true, secrets are fetched from GCP Secret Manager
# This requires Workload Identity to be configured in GKE
USE_GCP_SECRET_MANAGER=false

# ==================================
# Notes
# ==================================
# - Frontend uses Next.js API routes at /api/* (BFF pattern)
# - Backend service URLs are only accessible server-side
# - No CORS configuration needed on Go services
# - Client-side code calls /api/* which proxies to backend services
# - Content DB stores static marketing content (loaded via Drizzle ORM)
